<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
  <title>Aetheris Offline RPG (Codex-ready)</title>
  <style>
    :root { color-scheme: dark; }
    html, body { margin:0; height:100%; background:#0b0f14; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; }
    #wrap { height:100%; display:grid; grid-template-rows:auto 1fr; }
    #topbar{ display:flex; gap:8px; align-items:center; padding:10px 12px; border-bottom:1px solid #1b2430; background:#0f1520; }
    #topbar button, #topbar select{ background:#141c28; color:#d7e2f0; border:1px solid #263244; border-radius:10px; padding:8px 10px; cursor:pointer; }
    #topbar button:hover{ filter:brightness(1.1); }
    #game{ width:100%; height:100%; display:grid; place-items:center; position:relative; overflow:hidden; user-select:none; outline:none; }
    canvas{ image-rendering:pixelated; border:1px solid #1b2430; border-radius:12px; background:#0b0f14; }
    .glass{ background: rgba(10,14,20,.66); border: 1px solid rgba(255,255,255,.08); border-radius: 12px; backdrop-filter: blur(6px); color:#d7e2f0; }
    #hud{ position:absolute; left:12px; top:12px; padding:10px 12px; min-width: 280px; font-size:13px; pointer-events:none; }
    .row{ display:flex; justify-content:space-between; gap:10px; align-items:center; }
    .muted{ color:#9fb0c7; font-size:12px; }
    .kbd{ font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; border:1px solid rgba(255,255,255,.15); padding:2px 6px; border-radius:8px; font-size:12px; }
    .bar{ height:10px; border-radius:999px; background: rgba(255,255,255,.08); overflow:hidden; margin-top:6px; }
    .fill{ height:100%; width:50%; border-radius:999px; }
    #log{ margin-top:8px; max-height:92px; overflow:auto; font-size:12px; color:#b9c7da; }
    #minimapWrap{ position:absolute; right:12px; top:12px; width: 200px; padding:10px 10px; pointer-events:none; }
    #minimap{ width: 200px; height: 140px; border-radius: 10px; background: rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.06); }
    #panels{ position:absolute; right:12px; bottom:12px; display:grid; gap:8px; pointer-events:auto; }
    .panel{ width: 320px; padding: 10px 12px; display:none; font-size:13px; }
    .panel h3{ margin:0 0 6px 0; font-size:14px; }
    .panel .closeHint{ font-size:12px; color:#9fb0c7; }
    .panel button{ background:#141c28; color:#d7e2f0; border:1px solid #263244; border-radius:10px; padding:7px 10px; cursor:pointer; }
    .panel button:hover{ filter:brightness(1.1); }
    .panel .list{ display:grid; gap:6px; margin-top:8px; }
    .panel .card{ padding:8px 10px; border-radius:10px; border:1px solid rgba(255,255,255,.08); background: rgba(255,255,255,.03); }
    .panel .grid2{ display:grid; grid-template-columns: 1fr auto; gap:8px; align-items:center; }
    .panel .grid3{ display:grid; grid-template-columns: 1fr auto auto; gap:8px; align-items:center; }
    #help{ position:absolute; left:12px; bottom:12px; padding:10px 12px; max-width: 520px; font-size:12px; pointer-events:none; }
  </style>
</head>
<body>
<div id="wrap">
  <div id="topbar">
    <strong style="color:#d7e2f0">Aetheris Offline RPG</strong>
    <span class="muted">Codex-ready • HTML + Canvas • sem dependências</span>
    <div style="flex:1"></div>
    <label class="muted">Classe:</label>
    <select id="classSel">
      <option value="WARRIOR">Guerreiro</option>
      <option value="ARCHER">Arqueiro</option>
      <option value="MAGE">Mago</option>
    </select>
    <button id="newBtn">Novo jogo</button>
    <button id="saveBtn">Salvar agora</button>
    <button id="resetBtn">Resetar save</button>
    <button id="debugBtn">Debug: off</button>
  </div>

  <div id="game" tabindex="0" aria-label="Área do jogo (clique para focar)">
    <canvas id="cv" width="960" height="540"></canvas>

    <div id="hud" class="glass">
      <div class="row">
        <div><strong id="pName">Desperto</strong> <span class="muted" id="zoneName"></span></div>
        <div class="muted"><span class="kbd">ESC</span> pause</div>
      </div>

      <div style="margin-top:6px" class="row">
        <div>HP: <span id="hpTxt"></span></div>
        <div>MP: <span id="mpTxt"></span></div>
      </div>
      <div class="bar"><div id="hpBar" class="fill" style="background:#ff4d4d"></div></div>
      <div class="bar"><div id="mpBar" class="fill" style="background:#4da6ff"></div></div>

      <div style="margin-top:8px" class="row">
        <div>Lv <strong id="lvTxt"></strong> • XP <span id="xpTxt"></span></div>
        <div>Gold <strong id="goldTxt"></strong></div>
      </div>

      <div style="margin-top:8px" class="row">
        <div>Pot HP <strong id="hpPotTxt"></strong> <span class="muted">(Z)</span></div>
        <div>Pot MP <strong id="mpPotTxt"></strong> <span class="muted">(X)</span></div>
      </div>

      <div id="log"></div>
      <div class="muted" style="margin-top:8px">
        Ataque: clique / espaço • Skill 1: <span class="kbd">Q</span> • Skill 2: <span class="kbd">E</span> • Invent.: <span class="kbd">I</span> • Quests: <span class="kbd">L</span> • Stats: <span class="kbd">C</span>
      </div>
    </div>

    <div id="minimapWrap" class="glass">
      <div class="row"><div><strong>Minimapa</strong></div><div class="muted"><span class="kbd">M</span> ocultar</div></div>
      <canvas id="minimap" width="200" height="140"></canvas>
      <div class="muted" style="margin-top:6px">Dica: clique perto de NPCs para interagir.</div>
    </div>

    <div id="panels">
      <div id="pausePanel" class="panel glass">
        <div class="row"><h3>Pausado</h3><div class="closeHint"><span class="kbd">ESC</span> fechar</div></div>
        <div class="muted">O jogo está pausado. Você ainda pode salvar/resetar pelo topo.</div>
      </div>

      <div id="invPanel" class="panel glass">
        <div class="row"><h3>Inventário</h3><div class="closeHint"><span class="kbd">I</span> fechar</div></div>
        <div id="invBody" class="list"></div>
      </div>

      <div id="questPanel" class="panel glass">
        <div class="row"><h3>Quests</h3><div class="closeHint"><span class="kbd">L</span> fechar</div></div>
        <div id="questBody" class="list"></div>
      </div>

      <div id="statsPanel" class="panel glass">
        <div class="row"><h3>Status</h3><div class="closeHint"><span class="kbd">C</span> fechar</div></div>
        <div id="statsBody" class="list"></div>
      </div>

      <div id="shopPanel" class="panel glass">
        <div class="row"><h3>Loja</h3><div class="closeHint"><span class="kbd">B</span> fechar</div></div>
        <div class="muted">Comprar/Vender (mínimo funcional).</div>
        <div id="shopBody" class="list"></div>
      </div>

      <div id="debugPanel" class="panel glass">
        <div class="row"><h3>Debug</h3><div class="closeHint">info</div></div>
        <pre id="debugBody" class="muted" style="margin:8px 0 0 0; white-space:pre-wrap"></pre>
      </div>
    </div>

    <div id="help" class="glass">
      <div class="row"><div><strong>Atalhos</strong></div><div class="muted">offline-first</div></div>
      <div class="muted" style="margin-top:6px">
        Mover: WASD/setas • Ataque: clique/espaço • Q/E skills • Z/X poções • I inventário • L quests • C status • B loja • M minimapa • ESC pause
      </div>
    </div>
  </div>
</div>

<script src="src/utils.js"></script>
<script src="src/data.js"></script>
<script src="src/save.js"></script>
<script src="src/input.js"></script>
<script src="src/ui.js"></script>
<script src="src/game.js"></script>
</body>
</html>
